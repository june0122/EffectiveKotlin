# 아이템 29. 외부 API를 랩(wrap)해서 사용하라

> wrap: 어떤 코드를 함수 또는 클래스 등으로 감싸는 것을 랩(wrap)이라고 부릅니다.

API 설계자가 안전하지 않다고 하거나 API 설계자가 안전하다고 해도 우리가 그것을 제대로 신뢰할 수 없다면, 해당 API는 불안정한 것입니다. 이러한 불안정한 API를 과도하게 사용하는 것은 굉장히 위험합니다. 어쩔 수 없이 이런 API를 활용해야 한다면, 최대한 이런 API를 로직과 직접 결합시키지 않는 것이 좋습니다. 그래서 많은 프로젝트가 잠재적으로 불안정하다고 판단되는 외부 라이브러리 API를 랩(wrap)해서 사용합니다.

랩해서 사용하면, 다음과 같은 자유와 안정성을 얻을 수 있습니다.

- 문제가 있다면 래퍼<small>(wrapper)</small>만 변경하면 되므로, API 변경에 쉽게 대응할 수 있습니다.
- 프로젝트의 스타일에 맞춰서 API 형태를 조정할 수 있습니다.
- 특정 라이브러리에서 문제가 발생하면, 래퍼를 수정해서 다른 라이브러리를 사용하도록 코드를 쉽게 변경할 수 있습니다.
- 필요한 경우 쉽게 동작을 추가하거나 수정할 수 있습니다.

단점으로는 다음과 같은 것들이 있습니다.

- 래퍼를 따로 정의해야 합니다.
- 다른 개발자가 프로젝트를 다룰 때, 어떤 래퍼를이 있는지 따로 확인해야 합니다.
- 래퍼들은 프로젝트 내부에서만 유효하므로, 문제가 생겨도 질문할 수 없습니다. 예를 들어 스택오버플로우에 질문을 올려도 아무도 답해 주지 못할 것입니다.

장점과 단점을 모두 이해하고 랩할 API를 결정해야 합니다. 라이브러리가 얼마나 안정적인지 확인할 수 있는 가장 기본적인 휴리스틱은 버전 번호와 사용자 수입니다. 일반적으로 라이브러리 사용자가 많을수록 안정적입니다. 사용자가 많으면, 제작자가 프로젝트에 작은 변화를 가할 때도 굉장히 신중하게 할 겁입니다. 반대로 인기가 없고 새로 만들어진 라이브러리는 위험할 수 있습니다. 이런 경우에는 신중하게 사용을 결정하고, 사용하기로 했다면 클래스와 함수로 랩하는 것을 고려하기 바랍니다.