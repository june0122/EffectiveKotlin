# 아이템 25. 공통 모듈을 추출해서 여러 플랫폼에서 재사용하라

기업이 한 플랫폼만을 대상으로 애플리케이션을 만드는 경우는 없습니다. 기업은 일반적으로 둘 이상의 플랫폼을 대상으로 하는 제품을 만들기 원하며, 요즘 대부분 기업의 제품과 서비스는 여러 플랫폼에서 돌아가고 있습니다. 네트워크 호출을 통해 통신하는 클라이언트와 서버 애플리케이션을 생각해 봅시다. 두 애플리케이션은 서로 소통하므로, 재사용할 수 있는 부분이 많을 것입니다. 다른 플랫폼에서 동일한 제품을 구현한다면, 재사용할 수 잇는 부분이 더 많을 것입니다. 특히 비즈니스 로직 부분들은 거의 동일합니다. 따라서 소스 코드를 공유할 수 있다면, 큰 이득이 발생할 것입니다.

### 풀스택 개발

많은 회사가 웹 개발을 기반으로 합니다. 일반적으로 웹사이트를 제품으로 사용하며, 백엔드 애플리케이션(서버 측)이 필요합니다. 웹사이트 개발에서는 자바스크립트가 왕입니다. 자바스크립트 이외의 선택지는 없을 정도로 독점적으로 사용되고 있습니다. 백엔드에서 가장 인기 있는 선택지는 자바입니다. 두 언어는 굉장히 다르므로, 일반적으로 백엔드와 웹은 분리해서 개발합니다. 하지만 상황은 변할 수 있습니다. 코틀린은 백엔드 개발을 위한 자바의 인기 있는 대안이 되고 있습니다. 예를 들어 코틀린은 자바에서 가장 많이 활용되는 스프링 등의 다른 프레임워크들을 모두 사용할 수 있습니다. 또한 코틀린 백엔드 프레임워크인 Ktor도 점점 많이 사용되고 있습니다. 그래서 최근 들어서 많은 자바 백엔드 프로젝트들이 코틀린으로 이동하는 것입니다. 코틀린의 굉장한 점 중 하나는 코틀린이 자바스크립트로 컴파일될 수 있다는 것입니다. 이미 많은 코틀린/JS 라이브러리가 있으며, 코틀린을 활용해 다양한 웹 애플리케이션을 만들 수 있습니다. 예를 들어 리액트 프레임워크와 코틀린/JS를 함께 사용해서 웹 프론트엔드를 만들 수도 있습니다. 즉, 웹 백엔드와 프론트엔드를 모두 코틀린으로 만들 수 있다는 것입니다. 이는 단순하게 만들 수 있다는 개념을 떠나서, 서로 코드를 공유할 수도 있다는 의미입니다. 따라서 공통 코드, API 엔드포인트 정의, 추상화 등을 재사용할 수 있습니다.

### 모바일 개발

이러한 기능은 모바일 세계에서 훨씬 더 유용합니다. 안드로이드 전용으로만 애플리케이션을 만드는 경우는 거의 없기 때문에 일반적으로 안드로이드, iOS 애플리케이션은 거의 대부분 동일한 동작을 하고, 내부적으로 비슷한 로직을 사용하지만, 다른 언어와 도구를 사용해서 따로 개발해야 합니다.

코틀린의 멀티 플랫폼 기능을 활용하면, 로직을 한 번만 구현하고, 두 플랫폼에서 이를 재사용할 수 있습니다. 공통 모듈을 만들고, 여기에 다양한 비즈니스 로직을 구현하면 됩니다. 이때 비즈니스 로직은 프레임워크와 플랫폼에 종속되지 않고, 독립적이어야 합니다(클린 아키텍처). 이러한 공통 로직은 처음부터 코틀린으로 직접 만들거나, 다른 공통 모듈을 활용해서 만들 수 있습니다. 만들기만 하면, 여러 플랫폼에서 사용할 수 있습니다.

안드로이드의 경우, Gradle을 사용해서 동일한 방법으로 만들어지므로, 직접 사용할 수 있습니다. 따라서 굉장히 쉽게 공통 모듈을 활용할 수 있습니다.

iOS의 경우 LLVM을 사용하여 네이티브 코드로 컴파일할 수 있는 코틀린/네이티브를 사용하면, Objective-C 프레임워크로 변환할 수 있습니다. 이렇게 변환하면 XCode 또는 AppCode에서 스위프트로 활용할 수 있습니다. 참고로, 코틀린/네이티브를 사용해 전체 애플리케이션을 만들어 버리는 방법도 있습니다.